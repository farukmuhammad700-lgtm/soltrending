<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Soltrending</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: #0d1421;
      color: #e2e8f0;
      min-height: 100vh;
    }
    .container { max-width: 420px; margin: 0 auto; padding: 20px; }

    /* Header */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 0;
      border-bottom: 1px solid #1e293b;
      margin-bottom: 20px;
    }
    .logo { font-size: 28px; font-weight: 800; background: linear-gradient(90deg, #60a5fa, #34d399); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .header-right { display: flex; align-items: center; gap: 12px; font-size: 14px; }
    .sol-balance { background: #1e293b; padding: 8px 14px; border-radius: 10px; font-weight: 600; }
    .connect-wallet { background: linear-gradient(90deg, #3b82f6, #10b981); color: white; border: none; padding: 10px 20px; border-radius: 14px; font-weight: 600; cursor: pointer; }
    .wallet-status { background: #10b981; color: white; padding: 10px 20px; border-radius: 14px; font-weight: 600; }
    .disconnect-wallet { background: #ef4444; color: white; border: none; padding: 10px 20px; border-radius: 14px; font-weight: 600; cursor: pointer; }

    /* Progress Bar */
    .progress-container { padding: 30px 0 40px; position: relative; }
    .progress-line { position: absolute; top: 24px; left: 0; height: 4px; background: #1e293b; width: 100%; border-radius: 2px; }
    .progress-fill { position: absolute; top: 24px; left: 0; height: 4px; background: #2dd4bf; width: 0%; border-radius: 2px; transition: width 0.5s ease; }
    .steps { display: flex; justify-content: space-between; position: relative; z-index: 2; }
    .step { text-align: center; flex: 1; }
    .circle {
      width: 48px; height: 48px; border-radius: 50%; background: #1e293b; color: #64748b;
      display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold;
      margin: 0 auto 12px; position: relative;
    }
    .step.active .circle { background: #3b82f6; color: white; box-shadow: 0 0 0 6px rgba(59,130,246,0.2); }
    .step.completed .circle { background: #10b981; color: white; }
    .step.completed .circle::after { content: "✓"; font-size: 20px; font-weight: bold; }
    .step-label { font-size: 13px; color: #64748b; }
    .step.active .step-label, .step.completed .step-label { color: #2dd4bf; font-weight: 600; }

    /* Content */
    .step-content { display: none; background: #162032; border-radius: 20px; padding: 32px; }
    .step-content.active { display: block; animation: fadeIn 0.4s; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: none; } }

    h1 { font-size: 26px; margin-bottom: 10px; color: white; }
    .description { color: #94a3b8; margin-bottom: 30px; line-height: 1.5; font-size: 15px; }

    .field { margin-bottom: 24px; }
    .field label { display: block; font-size: 17px; font-weight: 600; margin-bottom: 10px; color: white; }
    .field label span { color: #f87171; }
    input[type="text"], textarea {
      width: 100%; padding: 16px 18px; background: #1e293b; border: 1px solid #334155; border-radius: 14px;
      color: #e2e8f0; font-size: 16px;
    }
    input:focus, textarea:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59,130,246,0.1); }
    textarea { min-height: 110px; resize: vertical; }

    .file-input {
      padding: 16px 18px; background: #1e293b; border: 1px solid #334155; border-radius: 14px;
      display: flex; align-items: center; justify-content: space-between; cursor: pointer;
    }
    .choose-file { background: white; color: #1e40af; padding: 8px 18px; border-radius: 10px; font-weight: 600; }
    .file-name { color: #94a3b8; font-size: 14px; }

    /* Tier Cards */
    .tier-card {
      background: linear-gradient(145deg, #1e293b, #162032);
      border: 2px solid transparent;
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }
    .tier-card:hover { transform: translateY(-6px); box-shadow: 0 12px 30px rgba(59,130,246,0.2); }
    .tier-card.active { border-color: #3b82f6; box-shadow: 0 0 0 4px rgba(59,130,246,0.3); }
    .tier-card h3 { font-size: 22px; margin-bottom: 8px; color: white; }
    .tier-card p { color: #94a3b8; }
    .recommended-badge {
      position: absolute; top: -12px; left: 50%; transform: translateX(-50%);
      background: linear-gradient(90deg, #10b981, #34d399); color: white;
      padding: 6px 20px; border-radius: 30px; font-size: 13px; font-weight: 700;
    }

    /* Duration Options */
    #duration-options { display: none; margin-top: 30px; }
    .duration-option {
      background: linear-gradient(145deg, #1e293b, #162032);
      border: 2px solid #334155;
      border-radius: 16px;
      padding: 18px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .duration-option:hover { border-color: #3b82f6; transform: translateX(6px); }
    .duration-option.selected {
      border-color: #3b82f6;
      background: rgba(59,130,246,0.15);
      box-shadow: 0 0 20px rgba(59,130,246,0.3);
    }
    .total-price { font-size: 20px; font-weight: 700; color: #60a5fa; margin: 30px 0 20px; text-align: center; }

    /* Payment */
    .wallet-address {
      background: #1e293b; padding: 20px; border-radius: 14px; text-align: center;
      font-family: monospace; font-size: 15px; word-break: break-all; position: relative;
      margin: 20px 0;
    }
    .copy-btn {
      position: absolute; top: 10px; right: 10px; background: #3b82f6; color: white;
      border: none; padding: 6px 10px; border-radius: 8px; cursor: pointer;
    }
    .instructions { background: #1e293b; border-radius: 14px; padding: 20px; }
    .instruction { display: flex; gap: 12px; margin-bottom: 16px; align-items: flex-start; }
    .instruction-number {
      background: #3b82f6; color: white; width: 28px; height: 28px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;
    }

    /* Buttons */
    .btn { width: 100%; padding: 16px; border: none; border-radius: 14px; font-size: 17px; font-weight: 600; cursor: pointer; margin-top: 12px; }
    .btn-primary { background: linear-gradient(90deg, #3b82f6, #10b981); color: white; }
    .btn-secondary { background: #334155; color: #94a3b8; }
    .btn-row { display: flex; gap: 12px; margin-top: 30px; }
    .btn-row .btn { flex: 1; margin-top: 0; }

    /* Loading */
    .loading-spinner {
      width: 20px; height: 20px; border: 3px solid #1e293b; border-top: 3px solid #3b82f6;
      border-radius: 50%; animation: spin 1s linear infinite; display: inline-block; margin-right: 10px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>

<div class="container">
<!-- Header -->
<header>
   <div class="logo" >Soltrending</div>
   <div class="header-right">
     <div class="sol-balance" id="sol-balance">0 SOL</div>
     <div id="wallet-ui">
        <button id="connect-btn" class="connect-wallet">Connect Wallet</button>
   </div>
 </div>
</header>
  </header>
  <!-- Progress Bar -->
  <div class="progress-container">
    <div class="progress-line"></div>
    <div class="progress-fill" id="progress-fill"></div>
    <div class="steps">
      <div class="step active" data-step="1"><div class="circle">1</div><div class="step-label">Project<br>Details</div></div>
      <div class="step" data-step="2"><div class="circle">2</div><div class="step-label">Package<br>Selection</div></div>
      <div class="step" data-step="3"><div class="circle">3</div><div class="step-label">Payment</div></div>
      <div class="step" data-step="4"><div class="circle">4</div><div class="step-label">Confirmation</div></div>
    </div>
  </div>

  <!-- Step 1 -->
  <div id="step-1" class="step-content active">
    <h1>Project Information</h1>
    <p class="description">Provide details about your project for the trending campaign</p>
    <form id="project-form">
      <div class="field"><label>Project Name <span>*</span></label><input type="text" required placeholder="Enter your project name"></div>
      <div class="field"><label>Contract Address <span>*</span></label><input type="text" required placeholder="Solana contract address"></div>
      <div class="field"><label>Project Logo</label>
        <div class="file-input"><div class="choose-file">Choose File</div><div class="file-name">no file selected</div>
          <input type="file" style="opacity:0;position:absolute;width:100%;height:100%;cursor:pointer;">
        </div>
      </div>
      <div class="field"><label>Telegram</label><input type="text" placeholder="@username"></div>
      <div class="field"><label>Twitter/X</label><input type="text" placeholder="@username"></div>
      <div class="field"><label>Website</label><input type="text" placeholder="https://example.com"></div>
      <div class="field"><label>Project Description</label><textarea placeholder="Briefly describe your project..."></textarea></div>
      <button type="submit" class="btn btn-primary">Continue to Packages</button>
    </form>
  </div>

  <!-- Step 2 -->
  <div id="step-2" class="step-content">
    <h1>Trending Packages</h1>
    <p class="description">Choose your visibility tier and duration</p>

    <div class="tier-card" id="standard-card">
      <h3>Standard Trending</h3>
      <p>Top 15 visibility with solid exposure</p>
    </div>

    <div class="tier-card recommended" id="premium-card">
      <div class="recommended-badge">Recommended</div>
      <h3>Premium Trending</h3>
      <p>Top 7 visibility for maximum impact</p>
    </div>

    <div id="duration-options">
      <h3 id="options-title">Select Duration</h3>
      <div class="duration-list" id="duration-list"></div>
      <div class="total-price">Total: <span id="total-price">0</span> SOL</div>
    </div>

    <div class="btn-row">
      <button type="button" class="btn btn-secondary" onclick="goToStep(1)">Back</button>
      <button type="button" class="btn btn-primary" id="continue-btn" onclick="goToStep(3)" disabled>Continue to Payment</button>
    </div>
  </div>

  <!-- Step 3 -->
  <div id="step-3" class="step-content">
    <h1>Payment Details</h1>
    <p class="description">Complete your payment to start trending</p>

    <div class="wallet-address">
      <button class="copy-btn" onclick="copyWallet()">Copy</button>
     5iuDQTtC4L9pSEkecxPjpF2usXwv7dNmtGRZv6oWPLVz
    </div>

    <div class="instructions">
      <h3 style="margin-bottom: 16px; color: white;">Payment Instructions</h3>
      <div class="instruction"><div class="instruction-number">1</div><div>Copy the wallet address above</div></div>
      <div class="instruction"><div class="instruction-number">2</div><div>Send <strong id="pay-amount">5.2</strong> SOL exactly</div></div>
      <div class="instruction"><div class="instruction-number">3</div><div>Wait 1-2 minutes for confirmation</div></div>
      <div class="instruction"><div class="instruction-number">4</div><div>Click "Verify Payment" below</div></div>
    </div>

    <div class="btn-row">
      <button type="button" class="btn btn-secondary" onclick="goToStep(2)">Back</button>
      <button type="button" class="btn btn-primary" onclick="goToStep(4)">Verify Payment</button>
    </div>
  </div>

  <!-- Step 4 -->
  <div id="step-4" class="step-content">
    <h1>Payment Verification</h1>
    <p class="description">Confirming your transaction on the blockchain</p>
    <div style="text-align:center; padding:40px 0;">
      <div class="loading-spinner"></div>
      <div style="font-size:18px; margin-top:20px;">Verifying payment on Solana blockchain...</div>
    </div>
  </div>

</div>

<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
<script>
  let currentStep = 1;
  let selectedTier = null;
  let selectedPrice = 0;
  let phantom = null;
  let publicKey = null;

  const prices = {
    standard: { 4: 1.0, 8: 1.7, 16: 4.1, 24: 5.2 },
    premium:  { 4: 1.5, 8: 3.0, 16: 5.7, 24: 8.4 }
  };

  // Phantom Wallet Integration
  async function initPhantom() {
    if ('phantom' in window) {
      phantom = window.phantom.solana;
      if (phantom.isPhantom) {
        console.log('Phantom detected');
        await checkIfWalletIsConnected();
      } else {
        console.log('Phantom not detected');
      }
    } else {
      console.log('Requesting Phantom install');
      window.open('https://phantom.app/download', '_blank');
    }
  }

  async function checkIfWalletIsConnected() {
    try {
      const resp = await phantom.connect({ onlyIfTrusted: true });
      publicKey = resp.publicKey;
      updateWalletUI(true);
      await getBalance();
    } catch (err) {
      console.log('Not connected');
      updateWalletUI(false);
    }
  }

  async function connectWallet() {
    try {
      const resp = await phantom.connect();
      publicKey = resp.publicKey.toString();
      updateWalletUI(true);
      await getBalance();
    } catch (err) {
      console.log('User rejected connection');
    }
  }

  async function disconnectWallet() {
    try {
      await phantom.disconnect();
      publicKey = null;
      updateWalletUI(false);
    } catch (err) {
      console.log('Disconnect error');
    }
  }

  function updateWalletUI(connected) {
    const ui = document.getElementById('wallet-ui');
    if (connected) {
      ui.innerHTML = `
        <div class="wallet-status">Connected: ${publicKey ? publicKey.slice(0,4) + '...' + publicKey.slice(-4) : ''}</div>
        <button class="disconnect-wallet" onclick="disconnectWallet()">Disconnect</button>
      `;
    } else {
      ui.innerHTML = '<button id="connect-btn" class="connect-wallet" onclick="connectWallet()">Connect Wallet</button>';
    }
  }

  async function getBalance() {
    if (!publicKey) return;
    try {
      const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'));
      const balance = await connection.getBalance(new solanaWeb3.PublicKey(publicKey));
      const sol = balance / solanaWeb3.LAMPORTS_PER_SOL;
      document.getElementById('sol-balance').textContent = `${sol.toFixed(2)} SOL`;
    } catch (err) {
      console.log('Balance fetch error');
    }
  }

  function goToStep(n) {
    if (n === 3 && !selectedTier) return alert("Please select a package");
    if (n === 4 && selectedPrice === 0) return;

    currentStep = n;
    document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
    document.getElementById(`step-${n}`).classList.add('active');

    // Update progress bar
    document.getElementById('progress-fill').style.width = ((n-1)/3 * 100) + '%';
    document.querySelectorAll('.step').forEach((s, i) => {
      s.classList.toggle('active', i+1 === n);
      s.classList.toggle('completed', i+1 < n);
    });

    if (n === 3) document.getElementById('pay-amount').textContent = selectedPrice.toFixed(2);
    if (n === 4) setTimeout(() => alert("Payment Verified! Your token is now trending!"), 3000);
  }

  // Tier selection
  document.getElementById('standard-card').onclick = () => selectTier('standard');
  document.getElementById('premium-card').onclick = () => selectTier('premium');

  function selectTier(tier) {
    selectedTier = tier;
    document.querySelectorAll('.tier-card').forEach(c => c.classList.remove('active'));
    document.getElementById(tier + '-card').classList.add('active');

    const list = document.getElementById('duration-list');
    list.innerHTML = Object.entries(prices[tier]).map(([hours, price]) => `
      <div class="duration-option" data-price="${price}">
        <span>${hours} Hours</span>
        <span>${price} SOL</span>
      </div>
    `).join('');

    document.getElementById('duration-options').style.display = 'block';
    document.getElementById('options-title').textContent = 
      tier === 'premium' ? 'Premium Trending Options' : 'Standard Trending Options';

    // Click handler for durations
    list.querySelectorAll('.duration-option').forEach(el => {
      el.onclick = () => {
        list.querySelectorAll('.duration-option').forEach(o => o.classList.remove('selected'));
        el.classList.add('selected');
        selectedPrice = parseFloat(el.dataset.price);
        document.getElementById('total-price').textContent = selectedPrice.toFixed(2);
        document.getElementById('continue-btn').disabled = false;
      };
    });

    // Auto-select 24h
    setTimeout(() => list.children[3]?.click(), 100);
  }

  function copyWallet() {
    navigator.clipboard.writeText('5iuDQTtC4L9pSEkecxPjpF2usXwv7dNmtGRZv6oWPLVz');
    alert('Wallet address copied!');
  }

  // Form submit → go to step 2
  document.getElementById('project-form').onsubmit = e => {
    e.preventDefault();
    if (!document.querySelector('input[required]').value) return alert("Fill required fields");
    goToStep(2);
  };

  // Init
  initPhantom();
  window.addEventListener('load', () => {
    if (phantom) {
      phantom.on('connect', () => checkIfWalletIsConnected());
      phantom.on('disconnect', () => updateWalletUI(false));
    }
  });   
</script>
</body>
</html>